version: '3.7'
services:
  # auth-server
  auth-db:
    build: ./auth-server/auth-db
    volumes:
      - auth-db-volume:/data/db
      - auth-db-volume:/data/configdb
    networks:
      - auth-server
  auth-server:
    build: ./auth-server
    networks:
      - auth-server
      - our-game
  # game-server
  game-db:
    build: ./game-server/game-db
    volumes:
      - game-db-volume:/data/db
      - game-db-volume:/data/configdb
    networks:
      - game-server
  game-server:
    build: ./game-server
    networks:
      - game-server
      - our-game
  # gateway
  gateway:
    build:
      context: .
      dockerfile: web-server/gateway/Dockerfile
    ports:
      - "8080:8080"
    networks:
      - our-game
volumes:
  auth-db-volume:
  game-db-volume:
networks:
  our-game:
  auth-server:
  game-server:
